<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Condo Smart Filter</title>
    <style>
        body { font-family: sans-serif; background: #f4f4f4; padding: 20px; }
        h1 { text-align: center; }
        button { 
            display: block; margin: 20px auto; padding: 10px 20px; 
            font-size: 16px; cursor: pointer; 
        }
        .card-container { display: flex; flex-direction: column; gap: 15px; }
        .card { 
            background: #fff; border: 1px solid #ddd; border-radius: 8px; 
            padding: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); 
        }
        .card h2 { margin-top: 0; color: #005a9e; }
        .card p { color: #333; }
        .card .rank {
            font-size: 24px; font-weight: bold; color: #d9534f;
            float: right;
        }
    </style>
</head>
<body>

    <h1>‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏î‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞</h1>
    <button id="findButton">
        ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤: "‡∏™‡∏ô‡πÉ‡∏à‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏î‡πÅ‡∏ñ‡∏ß‡∏ó‡πà‡∏≤‡∏û‡∏£‡∏∞ ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏î‡∏¥‡∏ô‡πÑ‡∏õ‡∏£‡∏ñ‡πÑ‡∏ü‡∏ü‡πâ‡∏≤‡πÑ‡∏î‡πâ"
    </button>
    
    <div id="resultsContainer" class="card-container">
        </div>

    <script>
        // --- 1. ‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (THE JSON DATABASE) ---
        // ‡∏õ‡∏Å‡∏ï‡∏¥‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÇ‡∏´‡∏•‡∏î‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡πÑ‡∏ü‡∏•‡πå .json ‡∏´‡∏£‡∏∑‡∏≠ Database
        const condoData = [
          {
            "id": 1,
            "name": "‡πÄ‡∏ã‡∏µ‡∏¢‡∏•‡πà‡∏≤ ‡∏à‡∏£‡∏±‡∏ç‡∏Ø 13 ‡∏™‡πÄ‡∏ï‡∏ä‡∏±‡πà‡∏ô (Ciela 13)",
            "area": "Thaphra",
            "distance_to_mrt": 0,
            "pet_friendly": false,
            "explanation_card": "ü•á ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏ô‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ‡∏£‡∏ñ: ‡∏ó‡∏≥‡πÄ‡∏• 0 ‡πÄ‡∏°‡∏ï‡∏£ ‡∏ï‡∏¥‡∏î MRT ‡πÉ‡∏´‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏î‡∏ß‡∏Å‡∏™‡∏ö‡∏≤‡∏¢‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î ‡πÅ‡∏•‡∏Å‡∏Å‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡∏™‡πà‡∏ß‡∏ô‡∏Å‡∏•‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏π‡∏á"
          },
          {
            "id": 2,
            "name": "‡∏®‡∏∏‡∏†‡∏≤‡∏•‡∏±‡∏¢ ‡πÑ‡∏•‡∏ó‡πå ‡∏ó‡πà‡∏≤‡∏û‡∏£‡∏∞‡∏Ø (Supalai Lite)",
            "area": "Thaphra",
            "distance_to_mrt": 570,
            "pet_friendly": false,
            "explanation_card": "ü•â ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏∏‡πâ‡∏°‡∏Ñ‡πà‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏ô‡πÉ‡∏ä‡πâ‡∏£‡∏ñ: ‡πÑ‡∏î‡πâ‡∏´‡πâ‡∏≠‡∏á‡πÉ‡∏´‡∏ç‡πà ‡∏ù‡πâ‡∏≤‡∏™‡∏π‡∏á ‡πÅ‡∏•‡∏∞‡∏ß‡∏±‡∏™‡∏î‡∏∏‡∏î‡∏µ‡πÉ‡∏ô‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡πâ‡∏°‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î ‡πÅ‡∏ï‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏ô‡πÑ‡∏Å‡∏•‡∏£‡∏ñ‡πÑ‡∏ü‡∏ü‡πâ‡∏≤"
          },
          {
            "id": 3,
            "name": "‡∏ô‡∏¥‡∏ä ‡πÇ‡∏°‡πÇ‡∏ô ‡∏≠‡∏¥‡∏™‡∏£‡∏†‡∏≤‡∏û (Niche Mono)",
            "area": "Thaphra",
            "distance_to_mrt": 200,
            "pet_friendly": true,
            "explanation_card": "ü•à ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏á‡∏ö: ‡πÉ‡∏Å‡∏•‡πâ MRT 200 ‡∏°. ‡πÑ‡∏î‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß (Low-Rise) ‡πÅ‡∏•‡∏∞‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÑ‡∏î‡πâ ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏ö‡∏∏‡∏Ñ‡∏•‡∏≤‡∏Å‡∏£‡∏®‡∏¥‡∏£‡∏¥‡∏£‡∏≤‡∏ä"
          },
          {
            "id": 4,
            "name": "‡∏¢‡∏π‡∏ô‡∏¥‡πÇ‡∏≠ ‡∏à‡∏£‡∏±‡∏ç 3 (Unio Charan 3)",
            "area": "Thaphra",
            "distance_to_mrt": 1000,
            "pet_friendly": false,
            "explanation_card": "‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏¢‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î (Yield): ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≠ ‡∏ï‡∏£.‡∏°. ‡∏ñ‡∏π‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î ‡πÅ‡∏ï‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡πà‡∏≠‡∏£‡∏ñ‡πÑ‡∏õ MRT ‡πÅ‡∏•‡∏∞‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ô‡∏≤‡πÅ‡∏ô‡πà‡∏ô‡∏™‡∏π‡∏á"
          }
        ];

        // --- 2. "‡∏™‡∏°‡∏≠‡∏á" (THE BRAIN) ---
        
        // ‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠ "‡∏Å‡∏é" ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏ß‡πà‡∏≤ NLP ‡∏ï‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡∏Ñ‡∏≥‡∏û‡∏π‡∏î‡∏Ç‡∏≠‡∏á‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤
        const USER_REQUEST = {
            area: "Thaphra",
            max_walk_distance: 500 // "‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏î‡∏¥‡∏ô‡πÑ‡∏õ‡∏£‡∏ñ‡πÑ‡∏ü‡∏ü‡πâ‡∏≤‡πÑ‡∏î‡πâ" (‡∏ï‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô <= 500 ‡πÄ‡∏°‡∏ï‡∏£)
            // ‡πÄ‡∏£‡∏≤‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡πÄ‡∏ä‡πà‡∏ô pet_friendly: true ‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà
        };

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÉ‡∏ô‡∏Å‡∏≤‡∏£ "‡πÉ‡∏´‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô" (Scoring)
        function calculateScore(condo) {
            let score = 0;
            
            // ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏´‡∏•‡∏±‡∏Å: ‡∏¢‡∏¥‡πà‡∏á‡πÉ‡∏Å‡∏•‡πâ MRT ‡∏¢‡∏¥‡πà‡∏á‡πÑ‡∏î‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏¢‡∏≠‡∏∞
            // ‡πÄ‡∏£‡∏≤‡∏Å‡∏•‡∏±‡∏ö‡∏Ñ‡πà‡∏≤ (inverse) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á 0 ‡πÑ‡∏î‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î
            // ‡πÄ‡∏£‡∏≤‡∏ö‡∏ß‡∏Å 1 ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏´‡∏≤‡∏£‡∏î‡πâ‡∏ß‡∏¢ 0
            score += 1000 / (condo.distance_to_mrt + 1); 

            // (‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á) ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡πÇ‡∏ö‡∏ô‡∏±‡∏™: ‡∏ñ‡πâ‡∏≤‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÑ‡∏î‡πâ ‡πÉ‡∏´‡πâ‡∏ö‡∏ß‡∏Å 50 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
            if (condo.pet_friendly === true) {
                score += 50;
            }
            
            return score;
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏´‡∏•‡∏±‡∏Å‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÅ‡∏•‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•
        function findAndDisplayCondos() {
            console.log("Starting search...");
            const container = document.getElementById('resultsContainer');
            container.innerHTML = '<h2>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤...</h2>'; // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÄ‡∏Å‡πà‡∏≤

            // --- 3. ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á RULE-BASE ---

            // ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1: ‡∏Å‡∏£‡∏≠‡∏á (Filter) ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏≠‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç "‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà"
            const filteredByArea = condoData.filter(condo => {
                return condo.area === USER_REQUEST.area;
            });

            // ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 2: ‡πÉ‡∏´‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô (Scoring) ‡πÅ‡∏•‡∏∞ ‡∏Å‡∏£‡∏≠‡∏á (Filter) ‡∏≠‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏î‡∏¥‡∏ô‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏≠‡∏≠‡∏Å
            const scoredResults = filteredByArea
                .map(condo => {
                    return {
                        ...condo, // ‡πÄ‡∏≠‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏î‡πÄ‡∏î‡∏¥‡∏°‡∏°‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                        score: calculateScore(condo) // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ
                    };
                })
                .filter(condo => {
                    // ‡∏Å‡∏£‡∏≠‡∏á‡∏≠‡∏±‡∏ô‡∏ó‡∏µ‡πà "‡πÄ‡∏î‡∏¥‡∏ô‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ" (‡πÄ‡∏Å‡∏¥‡∏ô 500‡∏°.) ‡∏≠‡∏≠‡∏Å
                    return condo.distance_to_mrt <= USER_REQUEST.max_walk_distance;
                });

            // ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 3: ‡∏à‡∏±‡∏î‡∏•‡∏≥‡∏î‡∏±‡∏ö (Rank) ‡∏à‡∏≤‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏°‡∏≤‡∏Å‡πÑ‡∏õ‡∏ô‡πâ‡∏≠‡∏¢
            const sortedResults = scoredResults.sort((a, b) => b.score - a.score);

            // --- 4. ‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• (DISPLAY) ---
            container.innerHTML = ''; // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤..."
            
            if (sortedResults.length === 0) {
                container.innerHTML = '<p>‡πÑ‡∏°‡πà‡∏û‡∏ö‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</p>';
                return;
            }

            // ‡∏ß‡∏ô‡∏•‡∏π‡∏õ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πå‡∏î
            sortedResults.forEach((condo, index) => {
                const rank = index + 1;
                const cardHTML = `
                    <div class="card">
                        <span class="rank">#${rank}</span>
                        <h2>${condo.name}</h2>
                        <p><strong>‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡∏ó‡∏µ‡πà‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥:</strong> 
                           ${condo.explanation_card} 
                           </p>
                        <p>
                            <small>
                                <strong>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•:</strong> 
                                (‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á: ${condo.distance_to_mrt} ‡∏°. | 
                                ‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏™‡∏±‡∏ï‡∏ß‡πå: ${condo.pet_friendly ? '‡πÑ‡∏î‡πâ' : '‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ'} | 
                                ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: ${Math.round(condo.score)})
                            </small>
                        </p>
                    </div>
                `;
                container.innerHTML += cardHTML;
            });
        }

        // ‡∏™‡∏±‡πà‡∏á‡πÉ‡∏´‡πâ‡∏õ‡∏∏‡πà‡∏° #findButton ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ñ‡∏π‡∏Å‡∏Ñ‡∏•‡∏¥‡∏Å
        document.getElementById('findButton').addEventListener('click', findAndDisplayCondos);

    </script>

</body>
</html>
